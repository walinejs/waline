<script>
NexT.utils.loadComments('#waline-comments', () => {
  NexT.utils.getScript('{%if config.waline.libUrl %}{{config.waline.libUrl}}{%else%}https://cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js{%endif%}', () => {
    new Waline(Object.assign({{ config.waline | safedump }}, {
      el: '#waline-comments',
      path: {{ url_for(page.path) | replace(r/index\.html$/, '') | safedump }}
    }));
  }, window.Waline);
});
</script>