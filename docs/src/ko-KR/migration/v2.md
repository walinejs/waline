---
title: '@waline/client V2로 마이그레이션'
icon: migration
---

## API 변경 사항

Waline의 기본 내보내기를 제거하고 대신 다음 내보내기를 제공합니다:

- `init`: 이전의 `Waline`과 동일하게 동작
- `version`: 버전 번호
- `commentCount`: 댓글 수 업데이트
- `pageviewCount`: 방문 수 업데이트
- `RecentComments`: 최근 댓글

Waline의 기본 내보내기를 `init` 명명된 내보내기로 변경했으며, Waline을 SSR 친화적으로 만들기 위해 V2에서는 CSS를 별도로 내보냅니다.

대부분의 경우 다음과 같은 변경만 필요합니다:

```diff
- <script src='//cdn.jsdelivr.net/npm/@waline/client'></script>
+ <script src='//unpkg.com/@waline/client@v2/dist/waline.js'></script>
+ <link href='//unpkg.com/@waline/client@v2/dist/waline.css' rel='stylesheet' />

  <script>
-  Waline({
+  Waline.init({
    el: '#waline',
    serverURL: 'YOUR SERVER URL'
  });
  </script>
```

## 추가된 옵션

- `comment` 옵션은 문자열을 CSS 선택자로 설정할 수 있습니다.
- `pageview` 옵션은 문자열을 CSS 선택자로 설정할 수 있습니다.

## 이름이 변경된 옵션

- `uploadImage`가 `imageUploader`로 변경됨

- `highlight`가 `highlighter`로 변경됨

- `previewMath`가 `texRenderer`로 변경됨

- `visitor`가 `pageview`로 변경됨

## 제거된 옵션

다음 옵션은 V1에서 오랫동안 사용 중단된 API로 표시되었으며, V2에서 제거되었습니다.

- `langMode`: `locale`을 사용하세요
- `placeholder`: `locale.placeholder`를 사용하세요
- `emojiCDN`: `emoji`를 사용하세요
- `emojiMaps`: `emoji`를 사용하세요
- `requiredFields`: `requiredMeta`를 사용하세요
- `avatar`: 서버 변수 `AVATAR_PROXY`를 사용하세요
- `avatarCDN`: 서버 변수 `AVATAR_PROXY`를 사용하세요
- `avatarForce`: 기본적으로 새로고침
- `anonymous`: `login`을 사용하세요
- `mathTagSupport`: `texRenderer`를 사용하세요
- `copyRight`: `copyright`를 사용하세요

## 기타 변경 사항

### 인스턴스

`Waline.init`은 이제 두 가지 필수 속성 `el`, `serverURL`이 유효하지 않을 때 오류 이유가 포함된 인스턴스를 반환하는 대신 오류를 발생시킵니다.

사용자가 잘못된 옵션을 설정한 경우 더 나은 호환성을 위해 `try { ... } catch (err) { ... }` 블록을 사용하여 오류를 캐치할 수 있습니다.

### 업데이트 동작 변경

- Waline은 이제 `Instance.update`를 통해 `el` 옵션을 제외한 모든 옵션의 업데이트를 지원합니다.
- `path` 매개변수는 `update()` 시 초기화됩니다. 즉, `update()` 중에 `path` 옵션을 전달하지 않으면 `window.location.pathname`이 됩니다.

### 댓글 및 페이지뷰 선택자 변경

Valine의 선택자 호환성에 대한 댓글 및 조회수 지원이 제거되었습니다.

- 댓글 선택자의 기본값은 `'.waline-comment-count'`입니다
- 페이지뷰 선택자의 기본값은 `'.waline-pageview-count'`입니다

현재 페이지와 다른 값을 선택자에서 가져와야 하는 경우, `data-path` 속성을 사용하는 것을 강력히 권장합니다.

호환성을 위해 이전의 `id` 속성 지원은 유지하지만, 이 호환성은 V3에서 제거될 예정입니다.

### CSS 클래스 변경

모든 CSS 클래스가 `v`에서 `wl-`로 변경되었습니다.
