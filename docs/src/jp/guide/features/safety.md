---
title: セキュリティ
icon: safe
order: -10
---

Waline コメントシステムのセキュリティは最優先事項です。ここでは Waline のセキュリティ機能について説明します。

<!-- more -->

## コメントのセキュリティ

### XSS 攻撃対策

Waline はサーバー側で [DOMPurify](https://github.com/cure53/DOMPurify) を使用して、各コメント入力をフィルタリングし、潜在的な XSS 攻撃を防ぎます。そのため、`<iframe>` やあらゆる形式のスクリプトは使用できません。

### リンクトラッキングの防止

すべてのリンクは自動的に `rel="noreferrer noopener"` が設定され、`target="_blank"` で新しいウィンドウで開きます。

### 悪意あるコンテンツの埋め込み防止

- 他の訪問者を騙して情報を送信させるような送信可能なフォームをコメントエリアに作成されるのを防ぐため、`<form>` と `<input>` は使用できません。

- スタイルを使ってウェブページを改ざんしたり、スパム広告を埋め込むために自分のコメントスタイルを変更されるのを防ぐため、`<style>` タグや要素の `style` 属性は使用できません。

- メディアの自動再生機能の悪用を防ぐため、`autoplay` 属性は使用できません。

### なりすましの防止

Waline はアカウントシステムをサポートしており、ユーザーにアカウント登録とログインを強制することができます。これにより、訪問者が他人のコメントを偽造することを防ぎます。

この機能を有効にするには、クライアントとサーバーの両方で必須ログインを設定する必要があります。詳細は [`login`](../../reference/client/props.md#login) と [`LOGIN`](../../reference/server/env.md#basic) を参照してください。

## サイトのセキュリティ

### 頻度制限

ユーザーによるスパムコメントを防ぐため、Waline はコメント投稿 IP を制限します。デフォルトでは、同一 IP から 1 分間に 1 件のコメントのみ送信できます。この制限は [サーバーリファレンス → 環境変数](../../reference/server/env.md#safety) で変更できます。

### 大量投稿の防止

コメント入力時に Waline は既存のコメントを検出し、類似度が高すぎるコメントを検出した場合はそのコメントを拒否します。これにより大量投稿をある程度防ぐことができます。

### コメントの審査

サイトが悪意ある攻撃を受けている場合、センシティブな時期、または多忙な時期には、コメントの審査機能を有効にすることができます。詳細は [サーバーリファレンス → 環境変数](../../reference/server/env.md#safety) を参照してください。

コメント審査が有効な場合、新しいコメントはすべてデフォルトで非表示になります。Waline 管理画面または対応するページのコメントボックスでコメントを確認・審査できます。承認されたコメントのみが表示されます。

## データのセキュリティ

Waline にはサーバー側があるため、コメントデータやページビューを誰も改ざんすることができません。

また、サーバー側で `DISABLE_USERAGENT` および `DISABLE_REGION` 変数を設定することで、ユーザーコメントの UA や地理情報が他者に閲覧されるのを防ぐことができます。
