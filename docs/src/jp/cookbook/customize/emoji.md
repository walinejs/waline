---
title: 独自の絵文字プリセットを作成する
icon: emoji
---

このクックブックでは、独自の絵文字プリセットを作成して使用する方法を説明します。

<!-- more -->

## 独自のプリセットを作成する

まず、いくつかの絵文字画像を用意する必要があります。その後、以下の手順に従ってプリセットを作成してください。

### 絵文字に名前をつけてアップロードする

シンプルさのために、Waline は絵文字画像のファイル名を絵文字のキーとして直接使用します。つまり、2 つの異なるプリセットをインポートし、どちらにも `laugh.png` という画像が含まれている場合、両方の絵文字は同じ絵文字 `:laugh:` に対応することになります。

そのため、各絵文字プリセットの作成者は、絵文字ファイルのすべての名前にプリセット名に関連するプレフィックスを追加することがベストプラクティスです。

適切な名前をつけたら、それらをサーバーにアップロードする必要があります。

### プリセット情報を記述する

いくつかの絵文字画像を `

```
https://example.com/my-emoji/
├─ my_laugh.png
├─ my_cute.png
├─ my_rage.png
├─ my_sob.png
└─ info.json
```

この時点で、Waline が絵文字プリセットにどのような絵文字が含まれているかを把握できるように、このフォルダに `info.json` ファイルも作成する必要があります。

まず、絵文字プリセットに名前を設定しましょう。たとえば `My Emoji` とします。画像に `my_` プレフィックスを設定し、ファイルが `png` 形式であるため、それらを `info.json` に追加する必要があります。

`info.json` の内容は次のようになります：

```json
{
  "name": "My Emoji",
  "prefix": "my_",
  "type": "png"
}
```

次に、希望する順番ですべての絵文字名を `items` にリストアップします。同時に、`prefix` と `type` で設定したプレフィックスとサフィックスは無視することを忘れないでください。

```json
{
  "name": "My Emoji",
  "prefix": "my_",
  "type": "png",
  "icon": "cute"
}
```

その後、タブに表示するアイコンとして代表的な絵文字を選択してください：

```json
{
  "name": "My Emoji",
  "prefix": "my_",
  "type": "png",
  "icon": "cute",
  "items": ["laugh", "sob", "rage", "cute"]
}
```

これで `info.json` の記述が完了しました。同じフォルダにアップロードしてください。

これにより、`https://example.com/my-emoji/` で `my-emoji` プリセットの作成が完了しました。

## タグを使用した GitHub ミラー

通常、独自のドメイン名を持ち、そのドメイン名に画像をアップロードするのは少し面倒に感じるかもしれません。また、時間の経過とともにリンクが無効になる可能性があります。そのため、より高度なアプローチとして、GitHub リポジトリを使用し、git のタグ機能を活用して GitHub リポジトリを絵文字プリセットとして提供することが挙げられます。

上記の手順と同様に、新しい GitHub リポジトリを作成し、上記と同じように絵文字に名前をつけ、同じ手順で `info.json` を作成して、リポジトリにアップロードします。

次に、この時点でリポジトリにタグを作成してください。`vx.x.x` の形式（例：`v1.0.0`）で設定することをお勧めします。

タグを追加したら、[cdn.jsdelivr.net](https://www.jsdelivr.com/) でバージョン付きの CDN リンクを `https://cdn.jsdelivr.net/gh/user/repo@version/file` の形式でプリセットとして使用できます。

`example/emoji` リポジトリを作成し、絵文字画像と `info.json` を直接アップロードし、`v1.0.0` タグを作成したと仮定すると、`https://cdn.jsdelivr.net/gh/example/emoji@v1.0.0/` をプリセットとして使用できます。

::: tip

プリセットを変更することで過去のコメントで参照されている画像リンクが無効にならないよう、リンクにタグを指定することが必要です。

公式の絵文字プリセットは、[walinejs/emojis](https://github.com/walinejs/emojis) リポジトリを作成し、CDN リンクを使用することで実現されています。現在は `v1.1.0` バージョンを使用しています。

:::

::: warning

cdn.jsdelivr.net は中国でブロックされているため、`cdn.jsdelivr.net` を `gcore.jsdelivr.net` に置き換えることができます。

:::

## 設定オブジェクトを使用する

前のセクションと同様に、以下のファイル構造があると仮定します：

```
https://example.com/my-emoji/
├─ my_laugh.png
├─ my_cute.png
├─ my_rage.png
└─ my_sob.png
```

`info.json` を作成してアップロードしてリンクをプリセットとして使用する方法に加えて、以下のオブジェクトを直接プリセットとして使用することもできます：

```js
{
  name: "My Emoji",
  folder: "https://example.com/my-emoji",
  prefix: "my_",
  type: "png",
  icon: "cute",
  items: ["laugh", "sob", "rage", "cute"]
}
```

ここでは、Waline に画像の保存場所を伝えるために `folder` プロパティを追加しています。
